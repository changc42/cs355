<!DOCTYPE html>
<!-- saved from url=(0087)https://venus.cs.qc.cuny.edu/~rlaw/cs355/assignment/05-soda-designer/soda-designer.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width initial-scale=1">
<title>soda-designer</title><link href="./A5_description_files/css" rel="stylesheet" type="text/css"><style type="text/css">html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 32px; padding-right: 32px; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none 0s ease 0s; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
svg[id^="mermaidChart"] { line-height: 1em; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
mark .md-meta { color: rgb(0, 0, 0); opacity: 0.3 !important; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}
#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}


</style>
</head>
<body class="typora-export os-windows">
<div id="write" class="is-node"><h1><a name="assignment-05-soda-designer" class="md-header-anchor"></a><span>Assignment 05: Soda Designer</span></h1><p><img src="./A5_description_files/top-2.gif" referrerpolicy="no-referrer" alt="top-2"></p><p>&nbsp;</p><h2><a name="assignment-goals" class="md-header-anchor"></a><span>Assignment Goals:</span></h2><ul><li><span>Building a web service (API) using the style of remote procedure call (RPC)</span></li><li><span>Learning how to use a 3rd party package (JIMP)</span></li><li><span>Due to Limited Time, instead of doing REST and GraphQL examples, you will watch a video that contrasts various architectural styles and write a 750-1000 words comparative essay.</span></li></ul><p>&nbsp;</p><h2><a name="required-files" class="md-header-anchor"></a><span>Required Files</span></h2><p><span>Download and extract the contents, </span></p><p><a href="https://venus.cs.qc.cuny.edu/~rlaw/cs355/assignment/05-soda-designer/resources/05-soda-designer.zip"><span>05-soda-designer.zip</span></a></p><p>&nbsp;</p><p><span>Rename the directory to </span><code>A05-########</code><span> replacing </span><code>#######</code><span> with your student </span></p><p>&nbsp;</p><p>&nbsp;</p><h2><a name="software" class="md-header-anchor"></a><span>Software</span></h2><p><span>Insomnia is needed for one task near the end.</span></p><p><a href="https://insomnia.rest/" target="_blank" class="url">https://insomnia.rest/</a></p><p>&nbsp;</p><h2><a name="software-library-restrictions" class="md-header-anchor"></a><span>Software Library Restrictions</span></h2><p><span>We will be utilizing the npm package Jimp for image manipulation on our machine.</span></p><p><span>This is the </span><strong><span>only</span></strong><span> package from npm allowed, for all networking tasks we defer to Node.js core API.</span></p><p><span>Use of other npm packages will award no credit.</span></p><h2><a name="web-services" class="md-header-anchor"></a><span>Web Services</span></h2><p><span>A web service is an HTTP Server that performs some task or lookups data on behalf of a networked client.</span></p><p><span>In the previous assignment we used a third party web service, the Spotify Web Service API.  When queried with an artist name, it provided us artist information, including album art images.  </span></p><p><span>For this assignment we will, build our own API which accept some basic inputs from client (color and flavor) and serve the client a downloadable image based on their request.</span></p><p>&nbsp;</p><h2><a name="jimp" class="md-header-anchor"></a><span>Jimp</span></h2><p><span>JavaScript Image Manipulation Program is a software package that provides image editing capabilities.   </span></p><p><a href="https://www.npmjs.com/package/jimp" target="_blank" class="url">https://www.npmjs.com/package/jimp</a></p><p>&nbsp;</p><h2><a name="theme" class="md-header-anchor"></a><span>Theme</span></h2><p><span>This assignment will have us building an API that allows the client to design their own Soda can.  </span></p><p><span>To do so we will be using four methods from the Jimp package, </span><code>read()</code><span>, </span><code>color()</code><span>, </span><code>blit()</code><span>, and </span><code>write()</code></p><ul><li><code>color()</code><span> : Apply a color filter on an entire image, you cannot choose areas to be colored.</span></li><li><code>blit()</code><span> Allows us to layer and rasterize images on top of each other.</span></li><li><code>read()</code><span> and </span><code>write()</code><span> provide I/O functionality, for loading images into a format that JIMP recognizes and is able to manipulate and then converting back to </span><code>png</code><span> output after all manipulation is complete</span></li></ul><p><span>We will start off with a base black can image, the user will specify the color.  JIMP will recolor the can to the user specified color then start layering images at predetermined (x,y) coordinates  </span></p><p><span>When the process is finished use the </span><code>write()</code><span> method to create the final image, then after the file has completed writing, use HTTP to pipe the resulting image to the client.  The client receives only a single image as the end result.  All the layering is done inside Jimp.</span></p><p>&nbsp;</p><p><img src="./A5_description_files/soda.png" referrerpolicy="no-referrer" alt="soda"></p><p>&nbsp;</p><h2><a name="installing-jimp" class="md-header-anchor"></a><span>Installing Jimp</span></h2><p><span>Jimp will be the only NPM package we will be using for this semester as I like to get as close to the metal as possible when working with networking tasks.  </span></p><p><span>Jimp is not written by the Node.js team, but by a third party developer Oliver Moran, it can be downloaded from the NPM registry.</span></p><p><span>Third party packages are hosted in a public centralized repository maintained by npm, Inc.</span></p><p><span>To download and install this package we use the command line client </span><code>npm</code><span> .  This command line tool is installed with Node.js</span></p><p>&nbsp;</p><ol start=""><li><p><span>Open a terminal inside </span><code>/A05-########/</code></p></li><li><p><span>Execute the command</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">npm</span> i jimp</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p><code>npm</code><span> to invoke the npm program</span></p><p><code>i</code><span> shorthand for for install (you can use </span><code>install</code><span> also if you like typing!)</span></p><p><code>jimp</code><span> for the Jimp package </span></p><p>&nbsp;</p></li><li><p><span>The download should start in a few seconds, once completed you should have a new directory </span><code>node_modules</code><span> and a new file </span><code>package-lock.json</code></p></li><li><p><span>Inside of </span><code>node_modules</code><span> you should see several directories including one for Jimp.  The other directories are Jimp's dependencies, other third party libraries that Jimp needs for functionality.</span></p></li><li><p><code>package-lock.json</code><span> controls which version of npm packages should this application use.  It is not important for us, besides knowing it's a security feature.</span></p></li></ol><p>&nbsp;</p><h2><a name="using-jimp" class="md-header-anchor"></a><span>Using Jimp</span></h2><p><span>Once installed Jimp can be invoked like any other package</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="js"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">http</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">"http"</span>);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">Jimp</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">"jimp"</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 45px;"></div><div class="CodeMirror-gutters" style="display: none; height: 45px;"></div></div></div></pre><p>&nbsp;</p><p><span>Note I use capital </span><code>J</code><span> in the variable </span><code>Jimp</code><span> and lower case j in the package name because all the sample code on the </span><a href="https://www.npmjs.com/package/jimp"><span>Jimp's package webpage</span></a><span> uses this convention, so that you can safely use samples from there.</span></p><p>&nbsp;</p><h2><a name="directory-structure" class="md-header-anchor"></a><span>Directory Structure</span></h2><p><span>If we navigate inside the </span><code>/assets/</code><span> directory we can see two subdirectories </span><code>/can/</code><span> and </span><code>/flavor/</code><span> containing the image resources for our sodas.  We also see a file </span><code>image-credits.txt</code><span> which we will be one of the endpoints for our server.</span></p><p><span>If we navigate inside the </span><code>/html/</code><span> directory we can see a file </span><code>form.html</code><span> containing a fillable form open this in a text editor for now we will need to know how radio buttons work.  In order to process the form data.</span></p><p>&nbsp;</p><h2><a name="sample-jimp-usage" class="md-header-anchor"></a><span>Sample Jimp Usage</span></h2><p><span>Add the following code to your </span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="js" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">Jimp</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'jimp'</span>);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Jimp</span>.<span class="cm-property">read</span>(<span class="cm-string">'assets/flavor/orange.png'</span>, (<span class="cm-def">err</span>, <span class="cm-def">image</span>) <span class="cm-operator">=&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable-2">err</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">throw</span> <span class="cm-variable-2">err</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-2">image</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  .<span class="cm-property">resize</span>(<span class="cm-number">128</span>, <span class="cm-number">128</span>) &nbsp; <span class="cm-comment">// resize</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  .<span class="cm-property">greyscale</span>() &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// set greyscale</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  .<span class="cm-property">color</span>([</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  {<span class="cm-property">apply</span>: <span class="cm-string">"red"</span>, <span class="cm-property">params</span>: [<span class="cm-number">0</span>]},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  {<span class="cm-property">apply</span>: <span class="cm-string">"green"</span>, <span class="cm-property">params</span>: [<span class="cm-number">0</span>]},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  {<span class="cm-property">apply</span>: <span class="cm-string">"blue"</span>, <span class="cm-property">params</span>: [<span class="cm-number">128</span>]}<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">//applies blue coloring to greyscale img</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  ])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  .<span class="cm-property">write</span>(<span class="cm-string">'blorange.png'</span>, () <span class="cm-operator">=&gt;</span> <span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-string">"File Saved!"</span>) );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">});</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 358px;"></div><div class="CodeMirror-gutters" style="display: none; height: 358px;"></div></div></div></pre><p>&nbsp;</p><p><span>Jimp's read method returns a callback where the first parameter is any errors encountered when attempting to reading the image and the second parameter represents the image resource.  This image resource can have various methods applied to it.</span></p><p><a href="https://www.npmjs.com/package/jimp#methods" target="_blank" class="url">https://www.npmjs.com/package/jimp#methods</a></p><p>&nbsp;</p><p><span>The return value of each method is also an image resource, which allows us to using a chaining technique,  feeding the output of one method as the input to another.</span></p><p><span>Chaining works because all elements of the same class have the same methods.  </span></p><p><span>All chainable methods are designed such that they return a new instance of the class.</span></p><p><span>The returned element should also have the same methods.</span></p><p><span>In the example above we load the image orange.  This image contains the full list of methods outlined in the link above (including resize, rotate, flip, color, greyscale, and write)</span></p><p><span>We call the resize method on it </span><code>image.resize(128,128)</code><span>, this method returns a new image slightly smaller, and we can assume that this returned image also has all the methods that images have.   </span><code>image.resize(128,128).greyscale()</code><span> will resize the image and then apply a greyscale filter to it.</span></p><p><span>We continue chaining manipulations, the next section applies a blue coloring to the image.</span></p><p><span>Finally the last method called is </span><code>write()</code><span> which saves the image to a file and then executes the callback in the second parameter after the writing is finished.</span></p><p>&nbsp;</p><h2><a name="loading-the-assets" class="md-header-anchor"></a><span>Loading the assets</span></h2><p><span>We are going to move all the assets from disk into memory as there is a fixed number of assets.  We can respond to clients faster if we don't have to go to disk, but there are drawbacks besides increased memory usage, if we want to change the images we need to stop the server.</span></p><p><span>If you have to service an arbitrary number of images, this cannot be done, but we do not have that restriction.  As we did the opposite technique of storing all images on disk, in the last assignment, we will try this technique for the current assignment.</span></p><p><span>We can load all the assets into memory before starting the server.</span></p><p>&nbsp;</p><p><span>Create a function </span><code>open_assets</code><span> the job of this function is to only load all the assets into memory.  Do not do any manipulation of images from here.  </span></p><ol start=""><li><span>Create an object </span><code>can</code><span>:</span></li></ol><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="js"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">can</span> <span class="cm-operator">=</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-property">lid</span>: {<span class="cm-property">path</span>: <span class="cm-string">"assets/can/can-lid.png"</span>},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-property">body</span>: {<span class="cm-property">path</span>: <span class="cm-string">"assets/can/can-body.png"</span>},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-property">label</span>: {<span class="cm-property">path</span>: <span class="cm-string">"assets/can/can-label.png"</span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">};</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 112px;"></div><div class="CodeMirror-gutters" style="display: none; height: 112px;"></div></div></div></pre><ol start="2"><li><span>Create an array </span><code>flavors</code></li></ol><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="js"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">flavors</span> <span class="cm-operator">=</span> [</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {<span class="cm-property">id</span>: <span class="cm-string">"apple"</span>, <span class="cm-property">path</span>: <span class="cm-string">"assets/flavor/apple.png"</span>, <span class="cm-property">x</span>: <span class="cm-number">120</span>, <span class="cm-property">y</span>: <span class="cm-number">265</span>},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {<span class="cm-property">id</span>: <span class="cm-string">"banana"</span>, <span class="cm-property">path</span>: <span class="cm-string">"assets/flavor/banana.png"</span>, <span class="cm-property">x</span>: <span class="cm-number">80</span>, <span class="cm-property">y</span>: <span class="cm-number">285</span>},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {<span class="cm-property">id</span>: <span class="cm-string">"cherry"</span>, <span class="cm-property">path</span>: <span class="cm-string">"assets/flavor/cherry.png"</span>, <span class="cm-property">x</span>: <span class="cm-number">100</span>, <span class="cm-property">y</span>: <span class="cm-number">250</span>},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {<span class="cm-property">id</span>: <span class="cm-string">"coconut"</span>, <span class="cm-property">path</span>: <span class="cm-string">"assets/flavor/coconut.png"</span>, <span class="cm-property">x</span>: <span class="cm-number">110</span>, <span class="cm-property">y</span>: <span class="cm-number">270</span>},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {<span class="cm-property">id</span>: <span class="cm-string">"crab"</span>, <span class="cm-property">path</span>: <span class="cm-string">"assets/flavor/crab.png"</span>, <span class="cm-property">x</span>: <span class="cm-number">83</span>, <span class="cm-property">y</span>: <span class="cm-number">305</span>},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {<span class="cm-property">id</span>: <span class="cm-string">"grape"</span>, <span class="cm-property">path</span>: <span class="cm-string">"assets/flavor/grape.png"</span>, <span class="cm-property">x</span>: <span class="cm-number">93</span>, <span class="cm-property">y</span>: <span class="cm-number">268</span>},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {<span class="cm-property">id</span>: <span class="cm-string">"mango"</span>, <span class="cm-property">path</span>: <span class="cm-string">"assets/flavor/mango.png"</span>, <span class="cm-property">x</span>: <span class="cm-number">100</span>, <span class="cm-property">y</span>: <span class="cm-number">295</span>},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {<span class="cm-property">id</span>: <span class="cm-string">"orange"</span>, <span class="cm-property">path</span>: <span class="cm-string">"assets/flavor/orange.png"</span>, <span class="cm-property">x</span>: <span class="cm-number">90</span>, <span class="cm-property">y</span>: <span class="cm-number">265</span>},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {<span class="cm-property">id</span>: <span class="cm-string">"watermelon"</span>, <span class="cm-property">path</span>: <span class="cm-string">"assets/flavor/watermelon.png"</span>, <span class="cm-property">x</span>: <span class="cm-number">75</span>, <span class="cm-property">y</span>: <span class="cm-number">280</span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ];</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 246px;"></div><div class="CodeMirror-gutters" style="display: none; height: 246px;"></div></div></div></pre><p><span>		</span><span>x and y coordinates are locations to place the image on the can, since the images are of different dimensions.  We will get back to this later.</span></p><ol start="3"><li><p><span>Using </span><code>Jimp.read()</code><span> load the three images for the can.  </span></p><p><span>You can either hard code the three reads or you can loop through the can object.</span></p><p><span>You can loop through the properties of an object using a </span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...in"><code>for...in</code></a><span> loop.  Be careful, you cannot use dot notation with these</span></p></li></ol><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="js"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">for</span>(<span class="cm-keyword">let</span> <span class="cm-def">property</span> <span class="cm-keyword">in</span> <span class="cm-variable">can</span>){</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">property</span>, <span class="cm-variable">can</span>[<span class="cm-variable">property</span>]); <span class="cm-comment">// lid, body, label</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">property</span>, <span class="cm-variable">can</span>.<span class="cm-property">property</span>); &nbsp;<span class="cm-comment">// can.property which doesn't exist!</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 90px;"></div><div class="CodeMirror-gutters" style="display: none; height: 90px;"></div></div></div></pre><p><span>Then use a second loop to load all the images.  This one is easier as it is an actual array.</span></p><p><span>It is easier to do this synchronously, but it is more efficient to do it asynchronously since loading of each image into memory does not prevent another image from being loaded.  But since all of this is done before the server starts the difference really doesn't matter.</span></p><p><span>For each loaded resource save it into a property </span><code>resource</code><span>.  Look below to understand what you should have conceptually.</span></p><p><img src="./A5_description_files/dontcopy.PNG" referrerpolicy="no-referrer" alt="dontcopy"></p><p><span>Essentially your are augmenting this </span><code>resource</code><span> property on to the existing variables dynamically (confirm by printing them to console, it will look similar to above)</span></p><p>&nbsp;</p><ol start="4"><li><p><span>Maintain a counter counting how many images has been loaded into memory and when the counter reaches </span><code>flavors.length + 3</code><span> (for the three can images) pass control to a function </span><code>start_server(can, flavors)</code><span> to initiate the next phase.</span></p><p>&nbsp;</p></li><li><p><span>In your main program add a call to </span><code>open_asset()</code><span> to start the execution of your program.</span></p><p>&nbsp;</p></li></ol><p>&nbsp;</p><h2><a name="setting-up-the-server" class="md-header-anchor"></a><span>Setting up the server</span></h2><p><span>A method that will start the server holding on to the resources </span><code>can</code><span> and </span><code>flavor</code><span> for later.</span></p><p><span>Create an HTTP server and listen of port 3000.  </span></p><p><span>When new requests events are received, functions </span><code>req</code><span>, and </span><code>res</code><span> are emitted.</span></p><p><span>There are four end points to take care of:</span></p><p>&nbsp;</p><h3><a name="-root" class="md-header-anchor"></a><span>/ (root)</span></h3><p><span>The root of the site will deliver the form </span><code>html/form.html</code></p><p><span>Send it using </span><code>"Content-Type" : "text/html"</code></p><h3><a name="image-creditstxt" class="md-header-anchor"></a><span>/image-credits.txt</span></h3><p><span>This will deliver the file </span><code>assets/image-credits.txt</code></p><p><span>Send it using </span><code>"Content-Type" : "text/plain"</code></p><h3><a name="design" class="md-header-anchor"></a><span>/design</span></h3><p><span>This will be the bulk of our code discussed in the next step</span></p><h3><a name="else" class="md-header-anchor"></a><span>else</span></h3><p><span>For everything else deliver a 404 response</span></p><p>&nbsp;</p><h2><a name="understanding-the-form" class="md-header-anchor"></a><span>Understanding the Form</span></h2><p><span>Open </span><code>html/form.html</code><span> in a text editor.</span></p><p><span>Inside of the form there are several inputs.</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="html" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="html"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">legend</span><span class="cm-tag cm-bracket">&gt;</span>Soda Designer<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">legend</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">label</span><span class="cm-tag cm-bracket">&gt;</span>Can Color<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">label</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"color"</span> <span class="cm-attribute">name</span>=<span class="cm-string">"color"</span> <span class="cm-attribute">value</span>=<span class="cm-string">"#0000FF"</span><span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">br</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">label</span><span class="cm-tag cm-bracket">&gt;</span>Flavor<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">label</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">br</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">class</span>=<span class="cm-string">"fruit"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"radio"</span> <span class="cm-attribute">name</span>=<span class="cm-string">"flavor"</span> <span class="cm-attribute">value</span>=<span class="cm-string">"apple"</span> <span class="cm-attribute">id</span>=<span class="cm-string">"apple"</span> <span class="cm-attribute">checked</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">label</span> <span class="cm-attribute">for</span>=<span class="cm-string">"apple"</span><span class="cm-tag cm-bracket">&gt;</span>Apple<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">label</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">class</span>=<span class="cm-string">"fruit"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"radio"</span> <span class="cm-attribute">name</span>=<span class="cm-string">"flavor"</span> <span class="cm-attribute">value</span>=<span class="cm-string">"banana"</span> <span class="cm-attribute">id</span>=<span class="cm-string">"banana"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">label</span> <span class="cm-attribute">for</span>=<span class="cm-string">"banana"</span><span class="cm-tag cm-bracket">&gt;</span>Banana<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">label</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">....</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 381px;"></div><div class="CodeMirror-gutters" style="display: none; height: 381px;"></div></div></div></pre><p>&nbsp;</p><p><span>The first input type is of </span><code>type=color</code><span> </span></p><p><span>This is HTML's color picker utility.  Values are stored as RGB Hexadecimal.  The example above has a default color of </span><code>#0000ff</code><span> (blue).  </span></p><p><span>RGB color uses a black canvas as baseline.</span></p><ul><li><span>The first two digits represent how much red light to add.</span></li><li><span>The next two digits represent how much green light to add.</span></li><li><span>The last two digits represent how much blue light to add.</span></li></ul><p><span>so </span><code>#000000</code><span> would be black.  </span><code>#ffffff</code><span> would be white and </span><code>#000088</code><span> would be a darker blue</span></p><p>&nbsp;</p><p><span>The rest of the inputs are of </span><code>type="radio"</code></p><p><span>Type radio elements are grouped using the </span><code>name</code><span> attribute, all elements in the form that have the same </span><code>name</code><span> will be grouped, such that at most, only 1 can be selected.  Selecting a different element deselects the previous.  When the form is submitted only the checked element is transmitted using </span><code>name = value</code><span> notation.</span></p><p>&nbsp;</p><p><span>When working on backend programming, </span><code>name</code><span> and </span><code>value</code><span> attributes are the values we are most concerned with as </span><code>name=value</code><span> pairs are sent when the form is submitted.</span></p><blockquote><p><code>id</code><span> is typically used on the frontend, in this example it is paired up with the </span><code>&lt;label&gt;</code><span>'s </span><code>for</code><span> attribute so when you click on the text inside the label it toggles the radio button.</span></p></blockquote><p>&nbsp;</p><p><span>An example URL will look like</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">/design?color=%230000ff&amp;flavor=apple</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><blockquote><p><code>%23</code><span> is the URL encoded representation of </span><code>#</code></p></blockquote><p>&nbsp;</p><h2><a name="design-40" class="md-header-anchor"></a><span>/design [40%]</span></h2><h3><a name="parsing-user-input" class="md-header-anchor"></a><span>Parsing user input</span></h3><p><span>Use </span><a href="https://nodejs.org/api/url.html#url_url_parse_urlstring_parsequerystring_slashesdenotehost"><span>url.parse()</span></a><span> to parse the results and save the query object into a variable </span><code>user_input</code><span>.</span></p><blockquote><p><span>Refer to HTTP Lecture 4 for the syntax for this.</span></p></blockquote><p>&nbsp;</p><h3><a name="convert-color-from-hex-to-rgb" class="md-header-anchor"></a><span>Convert color from hex to rgb</span></h3><p><span>Here's a utility function to convert from hexToRgb</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="js"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">hexToRgb</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span> <span class="cm-def">hexToRgb</span>(<span class="cm-def">hex</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">let</span> <span class="cm-def">result</span> <span class="cm-operator">=</span> <span class="cm-string-2">/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i</span>.<span class="cm-property">exec</span>(<span class="cm-variable-2">hex</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-2">result</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">?</span> {<span class="cm-property">r</span>: <span class="cm-variable">parseInt</span>(<span class="cm-variable-2">result</span>[<span class="cm-number">1</span>], <span class="cm-number">16</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">g</span>: <span class="cm-variable">parseInt</span>(<span class="cm-variable-2">result</span>[<span class="cm-number">2</span>], <span class="cm-number">16</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">b</span>: <span class="cm-variable">parseInt</span>(<span class="cm-variable-2">result</span>[<span class="cm-number">3</span>], <span class="cm-number">16</span>)}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  : {<span class="cm-property">r</span>: <span class="cm-number">255</span>, <span class="cm-property">g</span>: <span class="cm-number">255</span>, <span class="cm-property">b</span>: <span class="cm-number">255</span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">};</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 224px;"></div><div class="CodeMirror-gutters" style="display: none; height: 224px;"></div></div></div></pre><p><span>Save the converted hex color to </span><code>color</code><span> and print the object, to familiarize yourself with the structure.</span></p><p>&nbsp;</p><h3><a name="lookup-the-image-associated-with-flavor" class="md-header-anchor"></a><span>Lookup the image associated with flavor</span></h3><p><span>We need to lookup the image resource associated with the flavor the client wants.</span></p><p><span>The flavor the client wants is inside of </span><code>user_input.flavor</code></p><p><span>But the </span><code>flavors</code><span> array is an array of objects so </span><code>indexOf</code><span> won't match.</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="js"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">let</span> <span class="cm-def">i</span> <span class="cm-operator">=</span> <span class="cm-variable">flavors</span>.<span class="cm-property">findIndex</span>(<span class="cm-def">flavor</span> <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">flavor</span>.<span class="cm-property">id</span> <span class="cm-operator">===</span> <span class="cm-variable">user_input</span>.<span class="cm-property">flavor</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p><span>We can use </span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex"><code>findIndex()</code></a><span> to find the first index where the </span><code>id</code><span> property matches the user input's </span><code>flavor</code><span>.</span></p><p>&nbsp;</p><blockquote><p><span>An alternative strategy is to create a new array with only the </span><code>id</code><span> inside it.  This pattern is widely used and very useful if you want to extract out a single property (column) from an array of objects.</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="js"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">only_id</span> <span class="cm-operator">=</span> <span class="cm-variable">flavors</span>.<span class="cm-property">map</span>(<span class="cm-def">flavor</span> <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">flavor</span>.<span class="cm-property">id</span>);<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">//array with only id propertys</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">let</span> <span class="cm-def">i</span> <span class="cm-operator">=</span> <span class="cm-variable">only_id</span>.<span class="cm-property">indexOf</span>(<span class="cm-variable">user_input</span>.<span class="cm-property">flavor</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 45px;"></div><div class="CodeMirror-gutters" style="display: none; height: 45px;"></div></div></div></pre></blockquote><p>&nbsp;</p><p><span>To prevent the user from changing the URL to break our application, if this value returns </span><code>-1</code><span> (not found) then send back a 404.</span></p><p><span>Otherwise pass control to a function </span><code>create_can(can, color, flavors[i], filename, res)</code></p><p><span>Generate filename by using the format:</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="js"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">let</span> <span class="cm-def">filename</span> <span class="cm-operator">=</span> <span class="cm-string-2">`./tmp/${</span><span class="cm-variable">flavors</span>[<span class="cm-variable">i</span>].<span class="cm-property">id</span><span class="cm-string-2">}-${</span><span class="cm-variable">color</span>.<span class="cm-property">r</span><span class="cm-string-2">}-${</span><span class="cm-variable">color</span>.<span class="cm-property">g</span><span class="cm-string-2">}-${</span><span class="cm-variable">color</span>.<span class="cm-property">b</span><span class="cm-string-2">}.png`</span>;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p>&nbsp;</p><h3><a name="creating-the-can" class="md-header-anchor"></a><span>Creating the can</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="js"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">create_can</span> (<span class="cm-def">can</span>, <span class="cm-def">color</span>, <span class="cm-def">flavor</span>, <span class="cm-def">filename</span>, <span class="cm-def">res</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">let</span> <span class="cm-def">new_can</span> <span class="cm-operator">=</span> <span class="cm-variable-2">can</span>.<span class="cm-property">body</span>.<span class="cm-property">resource</span>.<span class="cm-property">clone</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">let</span> <span class="cm-def">colored_can</span> <span class="cm-operator">=</span> <span class="cm-variable-2">new_can</span>.<span class="cm-property">color</span>([</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {<span class="cm-property">apply</span>: <span class="cm-string">"red"</span>, <span class="cm-property">params</span>: [<span class="cm-variable-2">color</span>.<span class="cm-property">r</span>]},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {<span class="cm-property">apply</span>: <span class="cm-string">"green"</span>, <span class="cm-property">params</span>: [<span class="cm-variable-2">color</span>.<span class="cm-property">g</span>]},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {<span class="cm-property">apply</span>: <span class="cm-string">"blue"</span>, <span class="cm-property">params</span>: [<span class="cm-variable-2">color</span>.<span class="cm-property">b</span>]}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ]);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">//...incomplete</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">};</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 246px;"></div><div class="CodeMirror-gutters" style="display: none; height: 246px;"></div></div></div></pre><p>&nbsp;</p><p><span>In my testing, method </span><code>color()</code><span> had a side effect that it colored the original can too (a mutable side effect), so to fix this I cloned it first, so that the original resource (</span><code>can.body.resource</code><span>) maintains uncolored.  This is another drawback of keeping all the assets in memory, you have to ensure they don't get changed between users.  Without the clone statement, each user would effect the base color of the can for any subsequent user.</span></p><p><span>In an idealized version of this API, there wouldn't be this undocumented side effect and the clone wouldn't be required.</span></p><p>&nbsp;</p><h3><a name="gluing-everything-together" class="md-header-anchor"></a><span>Gluing Everything together</span></h3><p><span>The </span><code>blit</code><span> method glues together two images together.  The syntax is</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="js"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">bottom</span>.<span class="cm-property">blit</span>(<span class="cm-variable">top</span>, <span class="cm-variable">x</span>, <span class="cm-variable">y</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p>&nbsp;</p><p><span>Take the </span><code>can.lid.resource</code><span> which is the bottom-most layer, and put </span><code>colored_can</code><span> on top of it at </span><code>(0,0)</code></p><p><span>Then put </span><code>can.label.resource</code><span> on top of that at </span><code>(40,210)</code></p><p><span>Then put </span><code>flavor.resource</code><span> on top of that at </span><code>(flavor.x, flavor.y)</code><span>  The flavor images are of different dimensions so each ones has their own x, y coordinate pair.</span></p><p><span>Then write the file to </span><code>filename</code><span>, in the callback, pass control to a function </span><code>deliver_can(filename, res)</code></p><p>&nbsp;</p><h3><a name="deliver-can" class="md-header-anchor"></a><span>Deliver Can</span></h3><p><span>The content type for the response is </span><code>"Content-Type": "image/png"</code></p><p><span>Create a Readable Stream for </span><code>filename</code></p><p><span>Pipe the results to </span><code>res</code></p><p>&nbsp;</p><h2><a name="cache-20" class="md-header-anchor"></a><span>Cache [20%]</span></h2><p><span>Implement a cache such that if the image exists already we skip to </span><code>deliver_can(filename, res)</code></p><p>&nbsp;</p><h2><a name="soda-designer-is-an-rpc-api-10" class="md-header-anchor"></a><span>Soda Designer is an RPC API [10%]</span></h2><p><span>Soda Designer can be categorized as a Remote Procedure Call (RPC) API.  </span></p><p><span>You access a endpoint </span><code>/design</code><span> and pass in some parameters (color and flavor).  The server performs some lookup or processing and then sends back a result.  </span></p><p>&nbsp;</p><p><span>The HTTP API signature can be thought of as</span></p><h4><a name="endpoint" class="md-header-anchor"></a><span>Endpoint: </span></h4><p><code>GET localhost:3000/design</code></p><figure><table><thead><tr><th style="text-align:left;"><span>Query Parameter</span></th><th style="text-align:left;"><span>Value</span></th></tr></thead><tbody><tr><td style="text-align:left;"><span>color</span></td><td style="text-align:left;"><em><span>Required</span></em><span>.  Hexadecimal representation of color</span></td></tr><tr><td style="text-align:left;"><span>flavor</span></td><td style="text-align:left;"><em><span>Required</span></em><span>. One of the following</span><br><span>apple, banana, cherry, coconut, crab, grape, mango, orange, watermelon</span></td></tr></tbody></table></figure><p>&nbsp;</p><p><span>Run the server and then using Insomnia download a soda image using any valid color and flavor.  Take a screenshot of the application.  Save it as  </span><code>insomnia-soda-api.png</code></p><p>&nbsp;</p><p>&nbsp;</p><h2><a name="writing-section-30" class="md-header-anchor"></a><span>Writing Section [30%]</span></h2><p><span>In the video below you will learn about the three API architecture styles RPC, REST and GraphQL.</span></p><p><span>After watching the video, in an essay compare and contrast the 3 styles of writing API's in 750-1000 words.</span></p><p><span>Describe examples of where you would choose to use one API architecture style over another.</span></p><p><span>You can use Word or Markdown for this part.</span></p><p>&nbsp;</p><iframe width="800" height="450" src="./A5_description_files/IvsANO0qZEg.html" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><p>&nbsp;</p><h2><a name="rubric" class="md-header-anchor"></a><span>Rubric</span></h2><ul><li><span>Soda Designer API: 40%</span></li><li><span>Implemented Cache: 20%</span></li><li><span>Screenshot from Insomnia: 10%</span></li><li><span>Essay: 30%</span></li></ul><p>&nbsp;</p><p>&nbsp;</p><ol start=""><li><p><span>Put all files to be submitted in the directory </span><code>A05-########</code><span> replacing </span><code>#</code><span> with your Student ID.</span></p></li><li><p><span>After testing the results, delete the </span><code>node_modules</code><span> directory and </span><code>package-lock.json</code><span>.  I will run the command </span><code>npm i jimp</code><span> to reinstall Jimp and it's dependencies.  (If you don't do this the final zip file size will be larger than 15MB)</span></p></li><li><p><span>Compress the files into a zip file.</span></p></li><li><p><span>Fill out the following form to submit:</span></p><p><a href="https://docs.google.com/forms/d/e/1FAIpQLScWSKqiRiUzUnZ7C8FRszJBtVYvv9-D8qs6W5ODODjYyh6rtA/viewform?usp=sf_link"><span>Standard Submission</span></a><span>  </span><span>	</span><span> </span><a href="https://docs.google.com/forms/d/e/1FAIpQLSeq-P9JZI8Q2doPG63HV9weHNPoyGCtkGfN7MWm1Ix22eNcMw/viewform?usp=sf_link"><span>Late Submission</span></a></p><p>&nbsp;</p><p><span>Student's who receive a permission error are not signed in to the correct account. The link below should help with switching accounts.</span></p><p><a href="https://accounts.google.com/AccountChooser" target="_blank" class="url">https://accounts.google.com/AccountChooser</a></p></li><li><p><span>On the submission form there is an assignment comment section, this is optional and a place for feedback or minor bug/typos reports (email me major problems that prevent progress). I prefer this blank if there are no comments.</span></p></li><li><p><span>Resubmissions are accepted until the cutoff, each student's final grade will be pieced together based on the highest components grades with late penalties applied to components submitted after the due date. Student's worried about a looming due/cutoff date can make an early submission to lock in points. There are no drawbacks to resubmissions.</span></p></li><li><p><span>It is the sole responsibility of students to ensure the correct files are sent by the appropriate due/cutoff date.  No flexibility will be given here.</span></p><p><span>After the due date the standard form will </span><strong><span>automatically</span></strong><span> stop accepting submissions.</span></p><p><span>After the cutoff date the late form will </span><strong><span>automatically</span></strong><span> stop accepting submissions.</span></p><p><span>Once closed I will not reopen submissions for any reason, don't email me regarding this. It is the sole responsibility of the student to juggle their personal and professional obligations.</span></p></li></ol><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div>

</body></html>